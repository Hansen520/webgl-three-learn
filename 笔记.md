## 给画布换个颜色

1.最短的webgl程序

gl.clear(gl.COLOR_BUFFER_BIT)和gl.clearColor(0,0,0,1)   清空颜色缓冲区

gl.clear(gl.DEPTH_BUFFER_BIT)和gl.clearDepth(1) 清空深度缓冲区

gl.clear(gl.STENCIL_BUFFER_BIT)和gl.clearStencil(0) 清空函数缓冲区



## 通过webgl绘制一个点

- 顶点着色器：通过计算获取位置信息，用来描述顶点的特性。顶点 是指二维三维空间中的一个点，可以理解为一个个坐标

- 片元着色器：通过计算获取颜色信息，进行逐片元处理程序。 片元 可以理解为一个个像素

  源码

  ```javascript
  	const ctx = document.getElementById('canvas');
      const gl = ctx.getContext('webgl');
  
      // 着色器
      // 创建着色器源码
      const VERTEX_SHADER_SOURCE = `
      // 必须要存在 main 函数
      void main() {
      // 要绘制的点的坐标
      gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
      // 点的大小
      gl_PointSize = 60.0;
      }
      `; // 顶点着色器
      //  gl_Position vec4(0.0,0.0,0.0,1.0)  x, y, z, w齐次坐标 (x/w, y/w, z/w)
  
      // gl_FragColor vec4(1.0,0.0,0.0,1.0) r, g, b, a
          const FRAGMENT_SHADER_SOURCE = `
          void main() {
          gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
          }
          `; // 片元着色器
  
      // 创建着色器
      const vertexShader = gl.createShader(gl.VERTEX_SHADER);
      const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
  
      // 指定顶点着色器的源码
      gl.shaderSource(vertexShader, VERTEX_SHADER_SOURCE);
      // 指定片元着色器的源码
      gl.shaderSource(fragmentShader, FRAGMENT_SHADER_SOURCE);
  
      gl.compileShader(vertexShader);
      gl.compileShader(fragmentShader);
  
      // 创建一个程序对象
      const program = gl.createProgram();
  
      gl.attachShader(program, vertexShader);
      gl.attachShader(program, fragmentShader);
  
      // 将着色器与js进行联系
      gl.linkProgram(program);
  
      // 利用
      gl.useProgram(program);
  
  		// 执行绘制
        // 要绘制的图形是什么， 从哪个开始，   使用几个顶点
        gl.drawArrays(gl.POINTS, 0, 1);
  ```

  从执行绘制开始以上都是公用代码可以对其进行封装使用！封装完后如下

  ```javascript
  function initShader(gl, VERTEX_SHADER_SOURCE, FRAGMENT_SHADER_SOURCE) {
    const vertexShader = gl.createShader(gl.VERTEX_SHADER);
    const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
  
    gl.shaderSource(vertexShader, VERTEX_SHADER_SOURCE); // 指定顶点着色器的源码
    gl.shaderSource(fragmentShader, FRAGMENT_SHADER_SOURCE); // 指定片元着色器的源码
  
    // 编译着色器
    gl.compileShader(vertexShader);
    gl.compileShader(fragmentShader);
  
    // 创建一个程序对象
    const program = gl.createProgram();
  
    gl.attachShader(program, vertexShader);
    gl.attachShader(program, fragmentShader);
  
    gl.linkProgram(program);
  
    gl.useProgram(program);
  
    return program;
  }
  
  ```

  ## webGl 三维坐标系
  
  1.我们认识到的canvas是二维坐标系，如图下所示
  
  ![image-20230406161448874](note-images/image-20230406161448874.png)
  
  2.然后就是webgl的三维坐标系
  
  ![image-20230406162109531](C:/Users/Hansen/AppData/Roaming/Typora/typora-user-images/image-20230406162109531.png)

